generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int                @id @default(autoincrement())
  name      String
  tagLine   String
  successes UsersOnSuccesses[]
}

model Success {
  id         Int                @id @default(autoincrement())
  champion   Champion           @relation(fields: [championId], references: [id])
  championId Int
  role       Role               @relation(fields: [roleId], references: [id])
  roleId     Int
  users      UsersOnSuccesses[]

  @@unique([championId, roleId])
}

model Champion {
  id        Int                @id @default(autoincrement())
  name      String             @unique
  imgUrl    String?
  successes Success[]
  roles     RolesOnChampions[]
}

model Role {
  id        Int                @id @default(autoincrement())
  name      String             @unique
  champions RolesOnChampions[]
  successes Success[]
}

model UsersOnSuccesses {
  success    Success  @relation(fields: [successId], references: [id])
  successId  Int
  user       User     @relation(fields: [userId], references: [id])
  userId     Int
  assignedAt DateTime @default(now())

  @@id([successId, userId])
}

model RolesOnChampions {
  role       Role     @relation(fields: [roleId], references: [id])
  roleId     Int
  champion   Champion @relation(fields: [championId], references: [id])
  championId Int

  @@id([roleId, championId])
}
